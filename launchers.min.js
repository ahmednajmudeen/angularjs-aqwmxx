!function(){"use strict";function e(){}function n(e){}function o(l,t,s,r,n,d,u,c,i,a,p){var g,f,h={openedWindow:null,launch:function(e){h.abandonedCalls=e;var a=n.defer();null!==e||h.openedWindow||r.error("This state should not happen.  Only time array is null is when we think the window was already open.");if(h.openedWindow&&!h.openedWindow.closed)return h.openedWindow.focus(),a.resolve(!0),a.promise;return f=null,t(function(){try{var e=Math.max(800,Math.floor(.5*d.innerWidth)),n=Math.floor(.8*d.innerHeight),o=d.screenTop+10,t=d.screenLeft+10;l.globalVars.Settings.AbandonedCallsWindowSizePos&&(e=l.globalVars.Settings.AbandonedCallsWindowSizePos.width,n=l.globalVars.Settings.AbandonedCallsWindowSizePos.height,o=l.globalVars.Settings.AbandonedCallsWindowSizePos.top,t=l.globalVars.Settings.AbandonedCallsWindowSizePos.left);var i="menubar=no,toolbar=no,location=no,resizable=yes,scrollbars=yes,status=no,personalbar=no,,width="+e+",height="+n+",top="+o+",left="+t;h.openedWindow=d.open("./ext-apps//abandonedCalls/index.html","_blank",i),g||(g=s(function(){h.openedWindow&&h.openedWindow.closed&&(r.debug(u,"closed"),l.$broadcast("MonitorClosed",{type:"AbandonedCalls"}),s.cancel(g),h.openedWindow=null,f=g=null)},500)),d.callBackToAbandonedCallsLauncher=b,h.openedWindow.callBackToAbandonedCallsLauncher=b,h.openedWindow.focus(),a.resolve(!0)}catch(n){a.reject(!1),c.open("Alert","The popup window to show the report results could not be opened.  A likely reason is that you have this site blocked in your Popup Blocker settings.").result.then(function(e){if(e)throw r.error("failure setting up report-display, likely it is a popup-blocker"),n})}},0),a.promise}};return h.close=close,h.sendKeepAlive=function(){A({type:"KeepAlive"})},h.sendAbandonedCalls=w,h.sendCallEvent=function(e,n){A({type:"CallEvent",data:{event:e,callObj:n}})},h.sendAlert=function(e,n){A({type:e,data:n})},h;function b(e,n){if(r.info("AbandonedCallsLauncher::messageFromChildWin",e),"READY"===e)f=n,A({type:"Init",data:{extension:h.extension,address:i.address}}),t(function(){l.globalVars.Settings.AbandonedCallsWindowState&&A({type:"RESTORE_STATE",state:l.globalVars.Settings.AbandonedCallsWindowState})},200);else if("NumAbandonedCalls"===e)l.globalVars.NumAbandonedCalls=n;else if("GetAbandonedCalls"===e)w(h.abandonedCalls),h.abandonedCalls=void 0;else if("RESIZE"===e){r.info("RESIZE",n);var o=angular.fromJson(n);l.globalVars.Settings.AbandonedCallsWindowSizePos=o,a.flushAllLocalApplicationSettings()}else"SAVE_STATE"===e?(r.debug("SAVE_STATE",n),l.globalVars.Settings.AbandonedCallsWindowState=angular.fromJson(n),a.flushAllLocalApplicationSettings()):"DIAL"===e?(r.info("Dial number",n),p.open({number:n,contactType:"External",dialImmediate:!0,abandonedCallback:!0})):"HANGUP"===e||r.info("AbandonedCallsLauncher::messageFromChildWin",e,n)}function w(e){A({type:"AbandonedCalls",data:e})}function A(e){null===h.openedWindow||h.openedWindow.closed||f&&f(e)}}angular.module("AbandonedCallsLauncher",["ConfirmationModal","dialModal"]).constant("APP","$AbandonedCallsLauncher").service("$AbandonedCallsLauncher",o).config(e).run(n),e.$inject=[],n.$inject=["$log"],o.$inject=["$rootScope","$timeout","$interval","$log","$q","$window","APP","$ConfirmationModal","UCServices","UCStorageService","$dialModalService"]}(),function(){"use strict";function e(){}function n(e){}function o(l,t,s,r,e,d,u,c,i,a,n){var p,g,f={openedWindow:null,arrAgentsToMonitor:[],launch:function(){var a=e.defer();if(f.openedWindow&&!f.openedWindow.closed)return f.openedWindow.focus(),a.resolve(!0),a.promise;return g=null,t(function(){try{var e=Math.max(500,Math.floor(.5*d.innerWidth)),n=Math.floor(.5*d.innerHeight),o=d.screenTop+10,t=d.screenLeft+10;l.globalVars.Settings.AgentMonitorWindowSizePos&&(e=l.globalVars.Settings.AgentMonitorWindowSizePos.width,n=l.globalVars.Settings.AgentMonitorWindowSizePos.height,o=l.globalVars.Settings.AgentMonitorWindowSizePos.top,t=l.globalVars.Settings.AgentMonitorWindowSizePos.left);var i="menubar=no,toolbar=no,location=no,resizable=yes,scrollbars=yes,status=no,personalbar=no,,width="+e+",height="+n+",top="+o+",left="+t;f.openedWindow=d.open("./ext-apps//agentMonitor/index.html","_blank",i),p||(p=s(function(){f.openedWindow.closed&&(r.debug(u,"closed"),l.$broadcast("MonitorClosed",{type:"AgentMonitor"}),s.cancel(p),f.openedWindow=p=g=null)},500)),d.callBackToAgentMonitorLauncher=b,f.openedWindow.callBackToAgentMonitorLauncher=b,f.openedWindow.focus(),a.resolve(!0)}catch(n){a.reject(!1),c.open("Alert","The popup window to show the report results could not be opened.  A likely reason is that you have this site blocked in your Popup Blocker settings.").result.then(function(e){if(e)throw r.error("failure setting up report-display, likely it is a popup-blocker"),n})}},0),a.promise}};return f.sendData=w,f.setQueues=function(e){f.queues={},angular.forEach(e,function(e){f.queues[e.ID]=e.Name})},f.setAgentsToMonitor=function(e){r.debug("setAgentsToMonitor",e),f.arrAgentsToMonitor=e,f.openedWindow&&!f.openedWindow.closed&&h()},f.sendKeepAlive=function(){w({type:"KeepAlive",data:{}})},f;function h(){n.getAgentStatus(f.arrAgentsToMonitor).then(function(e){f.sendData({type:"data",data:{queues:f.queues,status:e}})},function(e){})}function b(e,n){if(r.info("AgentMonitorLauncher::messageFromChildWin",e),"READY"===e)g=n,w({type:"Init",data:{address:i.address}}),t(function(){l.globalVars.Settings.AgentMonitorWindowState&&f.sendData({type:"RESTORE_STATE",data:l.globalVars.Settings.AgentMonitorWindowState}),h()},500);else if("RESIZE"===e){var o=angular.fromJson(n);l.globalVars.Settings.AgentMonitorWindowSizePos=o,a.flushAllLocalApplicationSettings()}else"SAVE_STATE"===e?(l.globalVars.Settings.AgentMonitorWindowState=angular.fromJson(n),a.flushAllLocalApplicationSettings()):r.info("AgentMonitorLauncher::messageFromChildWin",e,n)}function w(e){null===f.openedWindow||f.openedWindow.closed||g&&g(e)}}angular.module("AgentMonitorLauncher",["ConfirmationModal"]).constant("APP","$AgentMonitorLauncher").service("$AgentMonitorLauncher",o).config(e).run(n),e.$inject=[],n.$inject=["$log"],o.$inject=["$rootScope","$timeout","$interval","$log","$q","$window","APP","$ConfirmationModal","UCServices","UCStorageService","$AgentUtils"]}(),function(){"use strict";function e(){}function n(e){}function o(l,t,s,r,e,d,n,u,c,i,a){var p,g,f={openedWindow:null,launch:function(){var a=e.defer();if(f.openedWindow&&!f.openedWindow.closed)return f.openedWindow.focus(),a.resolve(!0),a.promise;return g=null,t(function(){try{var e=Math.max(500,Math.floor(.5*d.innerWidth)),n=Math.floor(.5*d.innerHeight),o=d.screenTop+10,t=d.screenLeft+10;l.globalVars.Settings.QueueMonitorWindowSizePos&&(e=l.globalVars.Settings.QueueMonitorWindowSizePos.width,n=l.globalVars.Settings.QueueMonitorWindowSizePos.height,o=l.globalVars.Settings.QueueMonitorWindowSizePos.top,t=l.globalVars.Settings.QueueMonitorWindowSizePos.left);var i="menubar=no,toolbar=no,location=no,resizable=yes,scrollbars=yes,status=no,personalbar=no,,width="+e+",height="+n+",top="+o+",left="+t;f.openedWindow=d.open("./ext-apps//queueMonitor/index.html","_blank",i),p||(p=s(function(){f.openedWindow.closed&&(r.debug(u,"closed"),l.$broadcast("MonitorClosed",{type:"QueueMonitor"}),s.cancel(p),f.openedWindow=p=g=null)},500)),d.callBackToQueueMonitorLauncher=b,f.openedWindow.callBackToQueueMonitorLauncher=b,f.openedWindow.focus(),a.resolve(!0)}catch(n){a.reject(!1),c.open("Alert","The popup window to show the report results could not be opened.  A likely reason is that you have this site blocked in your Popup Blocker settings.").result.then(function(e){if(e)throw r.error("failure setting up report-display, likely it is a popup-blocker"),n})}},0),a.promise}};return f.sendData=w,f.setQueuesToMonitor=function(e){r.debug("setQueuesToMonitor",e),f.arrQueuesToMonitor=e,f.openedWindow&&!f.openedWindow.closed&&h()},f.setQueueThresholds=function(e){f.queueThresholds=e,f.sendData({type:"thresholds",data:e})},f.sendKeepAlive=function(){w({type:"KeepAlive",data:{}})},f;function h(){n.getQueueStatus(f.arrQueuesToMonitor).then(function(e){f.sendData({type:"data",data:{status:e,thresholds:f.queueThresholds}})})}function b(e,n){if("READY"===e)r.info("QueueMonitorLauncher::messageFromChildWin",e),g=n,w({type:"Init",data:{address:i.address}}),h(),t(function(){l.globalVars.Settings.QueueMonitorWindowState&&f.sendData({type:"RESTORE_STATE",data:l.globalVars.Settings.QueueMonitorWindowState})},1e3);else if("RESIZE"===e){var o=angular.fromJson(n);l.globalVars.Settings.QueueMonitorWindowSizePos=o,a.flushAllLocalApplicationSettings()}else"SAVE_STATE"===e?(l.globalVars.Settings.QueueMonitorWindowState=angular.fromJson(n),a.flushAllLocalApplicationSettings()):r.info("QueueMonitorLauncher::messageFromChildWin",e,n)}function w(e){null===f.openedWindow||f.openedWindow.closed||g&&g(e)}}angular.module("QueueMonitorLauncher",["ConfirmationModal"]).constant("APP","$QueueMonitorLauncher").service("$QueueMonitorLauncher",o).config(e).run(n),e.$inject=[],n.$inject=["$log"],o.$inject=["$rootScope","$timeout","$interval","$log","$q","$window","$AgentUtils","APP","$ConfirmationModal","UCServices","UCStorageService"]}();