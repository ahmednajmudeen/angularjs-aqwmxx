<a ng-if="::!globalVars.IsUT880" href ng-click="back()" class="text-primary"><i class="fa fa-chevron-left"></i> {{::getLocalPhrase('Button.Back')}}</a>
<div class="row" style="margin-top:.5em"><div class="col-md-12"><div class="row"><div class="col-xs-12">
<div class="pull-left">
<img class="img-responsive img-rounded" ng-class="data.user.cache.photoClass" ng-src="{{ data.user.photo }}" alt="" style="max-width: 52px; max-height: 52px;border-radius: 50%;padding-top: 6px;padding-left: 3px;padding-right: 3px;"></div>
<div class="pull-left">
<div class="col-xs-12" style="padding:0"><div class="col-xs-12">
<h5>{{data.user.name}}<span ng-class="getBLFStatusColor(data.user.presence.forwarding.mode)">
{{data.user.extension}} <span ng-class="getBLFStatusClass(data.user.presence.forwarding.mode)"></span></span></h5>


</div>
<div class="col-xs-12" ng-if="::!isLoggedInUser( data.user )"><a ui-sref="app.newChat({chatParm: data.user.extension})" 
ng-class="{'alert-info': data.user.cache.numUnreadChats}" ng-if="data.user.cache.showChat">
<span><i class="fa fa-comment-o"></i> Chat</span> <span class="badge text-info" ng-if="data.user.cache.numUnreadChats">{{data.user.cache.numUnreadChats}}</span></a> <a href="" ng-click="callNumber2(data.user.extension)" ng-if="data.alternateNumbers.length==0"><span><i class="glyphicon glyphicon-phone"></i> {{::getLocalPhrase('Dial.Call')}}</span></a> <span uib-dropdown is-open="data.open.callDropdown" ng-if="data.alternateNumbers.length>0"><a href uib-dropdown-toggle><i class="glyphicon glyphicon-phone"></i> {{::getLocalPhrase('Dial.Call')}}</a><ul uib-dropdown-menu role="menu"><li><a href ng-click="callNumber2(data.user.extension)">{{ data.user.extension }}</a></li><li class="divider"></li><li ng-repeat="altNumber in data.alternateNumbers"><a href ng-click="callNumber2(altNumber.Number, altNumber.AltType)">{{ altNumber.Number }} ({{ showAltNumType(altNumber.AltType) }})</a></li></ul></span> <a ng-if="data.user.Email" href="mailto:{{data.user.Email}}" target="_top"><i class="fa fa-envelope-o"></i> {{::getLocalPhrase('Email')}}</a></div></div></div></div></div><div ng-if="::isLoggedInUser( data.user )" style="margin-top:5px"><div class="panel panel-default"><div class="panel-heading"><div class="panel-title">{{::getLocalPhrase('Presence.Title')}}</div></div><div class="panel-body"><label>{{::getLocalPhrase('Profile.Name')}}</label><div class="row"><div class="col-xs-9"><div class="input-group"><input id="idProfileName" name="idProfileName" style="width:100%" class="form-control" placeholder="{{::getLocalPhrase('Profile.Title.Placeholder')}}" ng-blur="doBlurProfileName()" ng-model="data.currentProfileName"><div class="input-group-btn" uib-dropdown is-open="data.profileNameDropdown"><button type="button" class="btn btn-default" uib-dropdown-toggle=""><span class="caret"></span></button><ul uib-dropdown-menu class="dropdown-menu-right" role="menu"><li ng-repeat="profileObj in presenceProfiles() track by $index"><a href="" ng-click="selectProfile(profileObj)">{{profileObj.name}}</a></li><li class="divider"></li><li><a href="" ng-click="selectProfile('__PROFILE_CLEAR__')">{{::getLocalPhrase('Profile.Clear')}}</a></li></ul></div></div></div><div class="col-xs-3"><a ng-href="" ng-if="(!data.presenceChanged && data.differentProfileChosen)" class="text-primary" ng-click="updatePresenceThenGoHome()" uib-tooltip="Update presence with the settings shown">{{::getLocalPhrase('Update')}}</a> <a ng-href="" ng-if="data.currentProfileName" class="text-danger" style="margin-left:1em" ng-click="deleteProfile()" uib-tooltip="Delete this profile"><i class="fa fa-times"></i> {{::getLocalPhrase('Button.Delete')}}</a></div></div><h5><small><p>{{::getLocalPhrase('Profile.Name.Help')}}</p></small></h5><hr style="background-color:#000;height:2px;border:0"><form role="form" name="presenceForm"><div class="form-group"><label class="control-label">{{::getLocalPhrase('Status')}}</label><br><div style="padding-left:2em">
<div class="pull-left" uib-dropdown ng-if="enableChangePresence( data.user )" is-open="data.open.dropdown1">
<a href uib-dropdown-toggle><span ng-class="presenceStatusColor(data.presence.status)">
<i ng-class="presenceStatusIcon(data.presence.status)"></i> {{presenceStatusLabel(data.presence.status)}} 
<b class="caret"></b></span></a><ul uib-dropdown-menu role="menu"><li ng-repeat="(key,presence) in ::presenceStatusArray()" ng-click="setPresenceStatus(presence); data.open.dropdown1=false;"><a ng-href=""><span ng-class="presence.color"><i ng-class="presence.icon"></i> {{presence.label}}</span></a></li></ul></div><a style="margin-left:25px" href ng-click="editSchedules()"><span class="glyphicon glyphicon-calendar"></span>{{::getLocalPhrase('Presence.ScheduledEvents')}} <span ng-if="data.futureEvents.length" class="badge info-badge">{{data.futureEvents.length}}</span></a></div></div><div class="form-group"><label for="remarks">{{::getLocalPhrase('Notes')}}</label><input class="form-control" id="remarks" ng-model="data.presence.remarks" placeholder="{{::getLocalPhrase('Presence.RemarksPlaceholder')}}" ng-change="data.presenceChanged=true"></div><a href="" ng-click="isCollapsed = !isCollapsed" ng-init="isCollapsed=true">{{::getLocalPhrase('Presence.AdvancedSettings')}} <i ng-class="{'fa fa-chevron-right':isCollapsed, 'fa fa-chevron-down' : !isCollapsed}"></i></a><p style="padding-left:2em" class="pointer" ng-click="isCollapsed = !isCollapsed" ng-if="isCollapsed"><small><strong>{{::getLocalPhrase('Presence.Subject')}}:</strong> {{data.presence.subject}}, <strong>{{::getLocalPhrase('Location')}}:</strong> {{data.presence.location}}, <strong>{{::getLocalPhrase('Presence.ExpectedReturn')}}:</strong> {{data.presence.expectedReturn | date : 'fullDate'}} {{data.presence.expectedReturn | date : 'shortTime'}}</small></p><hr><div class="well well-lg" uib-collapse="isCollapsed"><div class="form-group"><label for="subject">{{::getLocalPhrase('Presence.Subject')}}</label><input id="subject" class="form-control" ng-model="data.presence.subject" ng-change="data.presenceChanged=true" placeholder="{{::getLocalPhrase('Presence.SubjectPlaceholder')}}"></div><div class="form-group"><label for="location">{{::getLocalPhrase('Location')}}</label><input id="location" class="form-control" ng-model="data.presence.location" ng-change="data.presenceChanged=true" placeholder="{{::getLocalPhrase('Presence.LocationPlaceholder')}}"></div><div class="form-group"><label class="control-label">{{::getLocalPhrase('Presence.ExpectedReturn')}}</label><div class="row" style="margin-top:1em"><div class="col-xs-6"><div class="input-group"><span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="openReturnTime()"><i class="glyphicon glyphicon-calendar"></i></button></span> <input class="form-control" uib-datepicker-popup="shortDate" ng-model="data.presence.expectedReturn" ng-change="data.presenceChanged=true" is-open="returnDate.opened" datepicker-options="dateOptions" close-text="Close"></div></div><div class="col-xs-6"><i class="pull-left fa fa-clock-o" style="margin-top:10px"></i>
<div uib-timepicker class="pull-left" ng-model="data.presence.expectedReturn" ng-change="data.presenceChanged=true" hour-step="1" minute-step="5" show-meridian="true" show-spinners="false"></div></div></div></div></div><hr ng-if="!isCollapsed"><rp-incoming-calls-setup></rp-incoming-calls-setup><br><rp-multi-ring></rp-multi-ring><div class="form-actions" ng-if="data.presenceChanged || data.mobilityUpdated || data.differentProfileChosen"><button type="submit" class="btn btn-primary" ng-click="updatePresenceThenGoHome()" uib-tooltip="Update presence with the settings shown" tooltip-placement="right" ng-if="data.mobilityUpdated || (data.presenceChanged && !data.currentProfileName) || (!data.presenceChanged && data.differentProfileChosen)">Update</button> <button class="btn btn-success" ng-if="(data.presenceChanged || data.mobilityUpdated) && data.currentProfileName" ng-click="saveProfile(true)">Save Profile and Update</button> <button class="btn btn-default" ng-if="(data.presenceChanged || data.mobilityUpdated)  && data.currentProfileName" ng-click="saveProfile(false)">Save Profile Changes</button> <button ng-click="resetPresence()" class="btn btn-danger" uib-tooltip="Reset to show current Presence">Reset</button></div></form></div></div></div><div ng-if="::!isLoggedInUser( data.user )"><div class="panel panel-default"><div class="panel-heading"><div class="panel-title">Presence</div></div><div class="panel-body"><div ng-if="enableChangePresence( data.user )"><form role="form" name="presenceForm"><div class="form-group"><label class="control-label">Status</label><br><div style="padding-left:2em">
<div class="pull-left" uib-dropdown ng-if="enableChangePresence( data.user )" is-open="data.open.dropdown1"><a href uib-dropdown-toggle>
<span ng-class="presenceStatusColor(data.presence.status)"><i ng-class="presenceStatusIcon(data.presence.status)"></i> {{presenceStatusLabel(data.presence.status)}} <b class="caret"></b></span></a><ul uib-dropdown-menu role="menu"><li ng-repeat="(key,presence) in ::presenceStatusArray()" ng-click="setPresenceStatus(presence); data.open.dropdown1=false;"><a ng-href=""><span ng-class="presence.color"><i ng-class="presence.icon"></i> {{presence.label}}</span></a></li></ul></div><a style="margin-left:20px" href ng-click="editSchedules()"><span class="glyphicon glyphicon-calendar"></span>{{::getLocalPhrase('Presence.ScheduledEvents')}} <span class="badge info-badge">{{data.futureEvents.length}}</span></a></div></div><div class="form-group"><label for="remarks2">{{::getLocalPhrase('Notes')}}</label><input class="form-control" id="remarks2" ng-model="data.presence.remarks" placeholder="{{::getLocalPhrase('Presence.RemarksPlaceholder')}}" ng-change="data.presenceChanged=true"></div><a href="" ng-click="isCollapsed = !isCollapsed" ng-init="isCollapsed=true">{{::getLocalPhrase('Presence.AdvancedSettings')}} <i ng-class="{'fa fa-chevron-right':isCollapsed, 'fa fa-chevron-down' : !isCollapsed}"></i></a><p style="padding-left:2em"><small><strong>{{::getLocalPhrase('Presence.Subject')}}:</strong> {{data.presence.subject}}, <strong>{{::getLocalPhrase('Location')}}:</strong> {{data.presence.location}}, <strong>{{::getLocalPhrase('Presence.ExpectedReturn')}}:</strong> {{data.presence.expectedReturn | date : 'fullDate'}} {{data.presence.expectedReturn | date : 'shortTime'}}</small></p><hr><div class="well well-lg" uib-collapse="isCollapsed"><div class="form-group"><label for="subject2">{{::getLocalPhrase('Presence.Subject')}}</label><input id="subject2" class="form-control" ng-model="data.presence.subject" ng-change="data.presenceChanged=true" placeholder="{{::getLocalPhrase('Presence.SubjectPlaceholder')}}"></div><div class="form-group"><label for="location2">{{::getLocalPhrase('Location')}}</label><input id="location2" class="form-control" ng-model="data.presence.location" ng-change="data.presenceChanged=true" placeholder="{{::getLocalPhrase('Presence.LocationPlaceholder')}}"></div><div class="form-group"><label class="control-label">{{::getLocalPhrase('Presence.ExpectedReturn')}}</label><div class="row" style="margin-top:1em"><div class="col-xs-6"><div class="input-group"><span class="input-group-btn"><button type="button" class="btn btn-default" ng-click="openReturnTime()"><i class="glyphicon glyphicon-calendar"></i></button></span> <input class="form-control" uib-datepicker-popup="shortDate" ng-model="data.presence.expectedReturn" ng-change="data.presenceChanged=true" is-open="returnDate.opened" datepicker-options="dateOptions" close-text="Close"></div></div><div class="col-xs-6"><i class="pull-left fa fa-clock-o" style="margin-top:10px"></i>
<div uib-timepicker class="pull-left" ng-model="data.presence.expectedReturn" ng-change="data.presenceChanged=true" hour-step="1" minute-step="5" show-meridian="true" show-spinners="false"></div></div></div></div></div><hr ng-if="!isCollapsed"><rp-incoming-calls-setup></rp-incoming-calls-setup><div class="form-actions" ng-if="data.presenceChanged"><button type="submit" ng-click="updatePresenceThenGoHome()" class="btn btn-primary">Save changes</button> <button type="button" ng-click="resetPresence()" class="btn">Cancel</button></div></form></div><div ng-if="!enableChangePresence( data.user )"><form role="form" name="presenceForm"><div class="form-group"><label class="control-label">Presence</label><br><div style="padding-left:2em"><span ng-class="presenceStatusColor(data.presence.status)"><i ng-class="presenceStatusIcon(data.presence.status)"></i> {{presenceStatusLabel(data.presence.status)}}</span></div></div><div class="form-group"><label>{{::getLocalPhrase('Presence.Subject')}}</label><div style="padding-left:2em"><span>{{data.presence.subject}}</span></div></div><div class="form-group"><label>{{::getLocalPhrase('Location')}}</label><div style="padding-left:2em"><span>{{data.presence.location}}</span></div></div><div class="form-group"><label>{{::getLocalPhrase('Presence.ExpectedReturn')}}</label><div style="padding-left:2em"><span>{{data.presence.expectedReturn | date : 'fullDate'}} {{data.presence.expectedReturn | date : 'shortTime'}}</span></div></div><div class="form-group"><label>{{::getLocalPhrase('Notes')}}</label><div style="padding-left:2em"><span>{{data.presence.remarks}}</span></div></div></form></div></div></div></div></div></div>